  CREATE TABLE "AGENCIA_PRODUCTO" 
   (	"ID_AGENCIA_PRODUCTO" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"ID_AGENCIA" NUMBER, 
	"ID_PRODUCTO" NUMBER, 
	"CBY" VARCHAR2(50), 
	"CDT" TIMESTAMP (6), 
	"MBY" VARCHAR2(50), 
	"MDT" TIMESTAMP (6), 
	"ACTIVO" VARCHAR2(1) DEFAULT 'Y', 
	 PRIMARY KEY ("ID_AGENCIA_PRODUCTO")
  USING INDEX  ENABLE, 
	 CONSTRAINT "AGENCIA_PRODUCTO_UK01" UNIQUE ("ID_AGENCIA", "ID_PRODUCTO")
  USING INDEX  ENABLE
   ) ;

  ALTER TABLE "AGENCIA_PRODUCTO" ADD CONSTRAINT "AGENCIA_PRODUCTO_FK01" FOREIGN KEY ("ID_AGENCIA")
	  REFERENCES "AGENCIA" ("ID_AGENCIA") ENABLE;
  ALTER TABLE "AGENCIA_PRODUCTO" ADD CONSTRAINT "AGENCIA_PRODUCTO_FK02" FOREIGN KEY ("ID_PRODUCTO")
	  REFERENCES "PRODUCTO" ("ID_PRODUCTO") ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AGENCIA_PRODUCTO_AUDIT" 
BEFORE INSERT OR UPDATE ON AGENCIA_PRODUCTO 
FOR EACH ROW 
BEGIN 
    :NEW.ACTIVO := NVL(:NEW.ACTIVO, 'Y');
    :NEW.MDT := SYSTIMESTAMP; 
    :NEW.MBY := NVL(v('APP_USER'), USER); 
    IF INSERTING THEN 
        :NEW.CDT := SYSTIMESTAMP; 
        :NEW.CBY := NVL(v('APP_USER'), USER); 
    END IF; 
END;
/
ALTER TRIGGER "TRG_AGENCIA_PRODUCTO_AUDIT" ENABLE;