  CREATE TABLE "AGENCIA_COMPRAS" 
   (	"ID_COMPRA" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"ID_AGENCIA" NUMBER, 
	"ID_PRODUCTO" NUMBER, 
	"FECHA" DATE, 
	"CANTIDAD" NUMBER, 
	"PRECIO_UNIDAD_USD" NUMBER, 
	"CBY" VARCHAR2(50), 
	"CDT" TIMESTAMP (6), 
	"MBY" VARCHAR2(50), 
	"MDT" TIMESTAMP (6), 
	"PROVEEDOR" VARCHAR2(100), 
	"ID_CIERRE" NUMBER, 
	 PRIMARY KEY ("ID_COMPRA")
  USING INDEX  ENABLE
   ) ;

  ALTER TABLE "AGENCIA_COMPRAS" ADD CONSTRAINT "AGENCIA_COMPRAS_FK01" FOREIGN KEY ("ID_AGENCIA")
	  REFERENCES "AGENCIA" ("ID_AGENCIA") ENABLE;
  ALTER TABLE "AGENCIA_COMPRAS" ADD CONSTRAINT "AGENCIA_COMPRAS_FK02" FOREIGN KEY ("ID_PRODUCTO")
	  REFERENCES "PRODUCTO" ("ID_PRODUCTO") ENABLE;
  ALTER TABLE "AGENCIA_COMPRAS" ADD CONSTRAINT "AGENCIA_COMPRAS_FK03" FOREIGN KEY ("ID_CIERRE")
	  REFERENCES "AGENCIA_CIERRES" ("ID_CIERRE") ENABLE;

  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_AGENCIA_COMPRAS_AUDIT" 
BEFORE INSERT OR UPDATE ON AGENCIA_COMPRAS 
FOR EACH ROW 
BEGIN 
    :NEW.MDT := SYSTIMESTAMP; 
    :NEW.MBY := NVL(v('APP_USER'), USER); 
    IF INSERTING THEN 
        :NEW.CDT := SYSTIMESTAMP; 
        :NEW.CBY := NVL(v('APP_USER'), USER); 
    END IF; 
END;
/
ALTER TRIGGER "TRG_AGENCIA_COMPRAS_AUDIT" ENABLE;